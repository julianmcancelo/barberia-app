<div class="bg-brand-charcoal min-h-screen py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4">
      <div>
        <h1 class="text-3xl font-serif-display text-brand-gold">Gesti√≥n de Tatuadores</h1>
        <p class="text-brand-light/70 mt-2">Administra el equipo de EQUINOCCIO STUDIO</p>
      </div>
      <button 
        (click)="showAddForm()" 
        class="btn-primary px-6 py-3 uppercase tracking-wider flex items-center gap-2">
        <span>+</span> Agregar Tatuador
      </button>
    </div>

    <!-- Success/Error Messages -->
    <div *ngIf="showSuccessMessage" class="bg-green-600/20 border border-green-500 text-green-400 px-4 py-3 rounded-lg mb-6 flex items-center justify-between">
      <span>‚úÖ {{ successMessage }}</span>
      <button (click)="hideMessages()" class="text-green-400 hover:text-green-300">√ó</button>
    </div>

    <div *ngIf="showErrorMessage" class="bg-red-600/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg mb-6 flex items-center justify-between">
      <span>‚ùå {{ errorMessage }}</span>
      <button (click)="hideMessages()" class="text-red-400 hover:text-red-300">√ó</button>
    </div>

    <!-- Search and Filters -->
    <div *ngIf="!showForm && tatuadores.length > 0" class="bg-brand-grey p-6 rounded-lg mb-8 border border-brand-gold/20">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div>
          <label class="block text-sm font-medium text-brand-light/90 mb-2">Buscar</label>
          <input 
            type="text" 
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            class="input-style w-full"
            placeholder="Buscar por nombre o especialidad...">
        </div>
        <div>
          <label class="block text-sm font-medium text-brand-light/90 mb-2">Filtrar por Especialidad</label>
          <select 
            [(ngModel)]="filterSpecialty"
            (change)="onSpecialtyFilterChange()"
            class="input-style w-full">
            <option value="">Todas las especialidades</option>
            <option *ngFor="let specialty of specialties" [value]="specialty">{{ specialty }}</option>
          </select>
        </div>
        <div class="flex items-end">
          <button 
            (click)="clearFilters()"
            class="btn-secondary px-4 py-2 text-sm uppercase tracking-wider w-full">
            Limpiar Filtros
          </button>
        </div>
      </div>
      <div class="mt-4 text-sm text-brand-light/70">
        Mostrando {{ filteredTatuadores.length }} de {{ tatuadores.length }} tatuadores
      </div>
    </div>

    <!-- Add/Edit Form -->
    <div *ngIf="showForm" class="bg-brand-grey p-8 rounded-lg mb-8 border border-brand-gold/20 shadow-2xl">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-serif-display text-brand-gold">
          {{ editingId ? 'Editar Tatuador' : 'Agregar Nuevo Tatuador' }}
        </h2>
        <button (click)="cancelForm()" class="text-brand-light/60 hover:text-brand-light text-2xl">√ó</button>
      </div>
      
      <form [formGroup]="tatuadorForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <!-- Image Upload Section -->
        <div class="border-2 border-dashed border-brand-gold/30 rounded-lg p-6 text-center">
          <div *ngIf="!imagePreview" class="space-y-4">
            <div class="text-brand-light/60">
              <svg class="mx-auto h-12 w-12" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div>
              <label for="file-upload" class="cursor-pointer">
                <span class="text-brand-gold hover:text-brand-light transition-colors font-medium">Subir foto del tatuador</span>
                <input id="file-upload" name="file-upload" type="file" class="sr-only" accept="image/*" (change)="onFileSelected($event)">
              </label>
              <p class="text-brand-light/60 text-sm">PNG, JPG, GIF hasta 10MB</p>
            </div>
          </div>
          <div *ngIf="imagePreview" class="space-y-4">
            <img [src]="imagePreview" alt="Preview" class="mx-auto h-32 w-32 object-cover rounded-full border-4 border-brand-gold">
            <button type="button" (click)="removeImage()" class="text-red-400 hover:text-red-300 text-sm">Eliminar imagen</button>
          </div>
        </div>

        <!-- Form Fields Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Nombre -->
          <div>
            <label for="nombre" class="block text-sm font-medium text-brand-light/90 mb-2">
              Nombre Completo *
            </label>
            <input 
              type="text" 
              id="nombre" 
              formControlName="nombre"
              [class]="'input-style w-full ' + (isFieldInvalid('nombre') ? 'border-red-500' : '')"
              placeholder="Nombre completo del tatuador">
            <div *ngIf="getFieldError('nombre')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('nombre') }}
            </div>
          </div>

          <!-- Especialidad -->
          <div>
            <label for="especialidad" class="block text-sm font-medium text-brand-light/90 mb-2">
              Especialidad *
            </label>
            <select 
              id="especialidad" 
              formControlName="especialidad"
              [class]="'input-style w-full ' + (isFieldInvalid('especialidad') ? 'border-red-500' : '')">
              <option value="">Seleccionar especialidad</option>
              <option *ngFor="let specialty of specialties" [value]="specialty">{{ specialty }}</option>
            </select>
            <div *ngIf="getFieldError('especialidad')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('especialidad') }}
            </div>
          </div>

          <!-- Experiencia -->
          <div>
            <label for="experiencia" class="block text-sm font-medium text-brand-light/90 mb-2">
              A√±os de Experiencia *
            </label>
            <input 
              type="text" 
              id="experiencia" 
              formControlName="experiencia"
              [class]="'input-style w-full ' + (isFieldInvalid('experiencia') ? 'border-red-500' : '')"
              placeholder="Ej: 5 a√±os, +10 a√±os">
            <div *ngIf="getFieldError('experiencia')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('experiencia') }}
            </div>
          </div>

          <!-- Tel√©fono -->
          <div>
            <label for="telefono" class="block text-sm font-medium text-brand-light/90 mb-2">
              Tel√©fono *
            </label>
            <input 
              type="tel" 
              id="telefono" 
              formControlName="telefono"
              [class]="'input-style w-full ' + (isFieldInvalid('telefono') ? 'border-red-500' : '')"
              placeholder="+54 11 1234-5678">
            <div *ngIf="getFieldError('telefono')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('telefono') }}
            </div>
          </div>

          <!-- Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-brand-light/90 mb-2">
              Email *
            </label>
            <input 
              type="email" 
              id="email" 
              formControlName="email"
              [class]="'input-style w-full ' + (isFieldInvalid('email') ? 'border-red-500' : '')"
              placeholder="tatuador@equinocciostudio.com">
            <div *ngIf="getFieldError('email')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('email') }}
            </div>
          </div>

          <!-- Instagram -->
          <div>
            <label for="instagram" class="block text-sm font-medium text-brand-light/90 mb-2">
              Instagram
            </label>
            <input 
              type="text" 
              id="instagram" 
              formControlName="instagram"
              [class]="'input-style w-full ' + (isFieldInvalid('instagram') ? 'border-red-500' : '')"
              placeholder="@usuario_instagram">
            <div *ngIf="getFieldError('instagram')" class="text-red-400 text-sm mt-1">
              {{ getFieldError('instagram') }}
            </div>
          </div>
        </div>

        <!-- Descripci√≥n -->
        <div>
          <label for="descripcion" class="block text-sm font-medium text-brand-light/90 mb-2">
            Descripci√≥n Profesional *
          </label>
          <textarea 
            id="descripcion" 
            formControlName="descripcion"
            rows="4"
            [class]="'input-style w-full ' + (isFieldInvalid('descripcion') ? 'border-red-500' : '')"
            placeholder="Describe la experiencia, estilo, certificaciones y especialidades del tatuador...">
          </textarea>
          <div *ngIf="getFieldError('descripcion')" class="text-red-400 text-sm mt-1">
            {{ getFieldError('descripcion') }}
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex gap-4 pt-6 border-t border-brand-gold/20">
          <button 
            type="submit" 
            [disabled]="tatuadorForm.invalid || submitting"
            class="btn-primary px-8 py-3 uppercase tracking-wider flex-1 disabled:opacity-50 disabled:cursor-not-allowed">
            <span *ngIf="!submitting">{{ editingId ? 'Actualizar Tatuador' : 'Agregar Tatuador' }}</span>
            <span *ngIf="submitting">Guardando...</span>
          </button>
          <button 
            type="button" 
            (click)="cancelForm()"
            class="btn-secondary px-8 py-3 uppercase tracking-wider">
            Cancelar
          </button>
        </div>
      </form>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-brand-gold mx-auto mb-4"></div>
      <div class="text-brand-gold text-lg">Cargando tatuadores...</div>
    </div>

    <!-- Tatuadores Grid -->
    <div *ngIf="!loading && filteredTatuadores.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      <div *ngFor="let tatuador of filteredTatuadores" class="bg-brand-grey rounded-lg overflow-hidden shadow-xl hover:shadow-2xl transition-all border border-brand-gold/20">
        <!-- Artist Image -->
        <div class="h-48 bg-brand-charcoal/50 flex items-center justify-center">
          <img *ngIf="tatuador.imagen" [src]="tatuador.imagen" [alt]="tatuador.nombre" class="w-full h-full object-cover">
          <div *ngIf="!tatuador.imagen" class="text-brand-light/40 text-6xl">üë§</div>
        </div>
        
        <!-- Artist Info -->
        <div class="p-6">
          <div class="flex justify-between items-start mb-3">
            <h3 class="text-xl font-serif-display text-brand-gold">{{ tatuador.nombre }}</h3>
            <span class="bg-brand-charcoal text-brand-gold px-2 py-1 rounded text-xs">{{ tatuador.especialidad }}</span>
          </div>
          
          <div class="space-y-2 mb-4">
            <div *ngIf="tatuador.experiencia" class="text-brand-light/80 text-sm">
              üèÜ {{ tatuador.experiencia }}
            </div>
            <div *ngIf="tatuador.telefono" class="text-brand-light/80 text-sm">
              üìû {{ tatuador.telefono }}
            </div>
            <div *ngIf="tatuador.email" class="text-brand-light/80 text-sm">
              ‚úâÔ∏è {{ tatuador.email }}
            </div>
            <div *ngIf="tatuador.instagram" class="text-brand-light/80 text-sm">
              üì∑ {{ tatuador.instagram }}
            </div>
          </div>
          
          <p class="text-brand-light/70 text-sm mb-4 line-clamp-3">
            {{ tatuador.descripcion || 'Sin descripci√≥n disponible' }}
          </p>
          
          <!-- Actions -->
          <div class="flex gap-2">
            <button 
              (click)="editTatuador(tatuador)"
              class="flex-1 bg-brand-gold text-brand-charcoal px-4 py-2 rounded hover:bg-brand-light transition-colors text-sm font-medium">
              Editar
            </button>
            <button 
              (click)="deleteTatuador(tatuador.id!, tatuador.nombre)"
              class="px-4 py-2 border border-red-400 text-red-400 rounded hover:bg-red-400 hover:text-white transition-colors text-sm font-medium">
              Eliminar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && tatuadores.length === 0" class="text-center py-16">
      <div class="text-6xl text-brand-light/30 mb-4">üë•</div>
      <h3 class="text-2xl font-serif-display text-brand-gold mb-2">No hay tatuadores registrados</h3>
      <p class="text-brand-light/60 mb-6">Comienza agregando el primer tatuador del equipo</p>
      <button 
        (click)="showAddForm()" 
        class="btn-primary px-8 py-4 uppercase tracking-wider">
        Agregar Primer Tatuador
      </button>
    </div>

    <!-- No Results State -->
    <div *ngIf="!loading && tatuadores.length > 0 && filteredTatuadores.length === 0" class="text-center py-16">
      <div class="text-6xl text-brand-light/30 mb-4">üîç</div>
      <h3 class="text-xl font-serif-display text-brand-gold mb-2">No se encontraron resultados</h3>
      <p class="text-brand-light/60 mb-6">Intenta con otros t√©rminos de b√∫squeda</p>
      <button 
        (click)="clearFilters()" 
        class="btn-secondary px-6 py-3 uppercase tracking-wider">
        Limpiar Filtros
      </button>
    </div>
  </div>
</div>
