<div class="bg-brand-charcoal min-h-screen py-12 px-4 sm:px-6 lg:px-8 text-brand-light">
  <div class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto bg-brand-dark-blue p-8 rounded-lg shadow-lg">
      
      <!-- Indicador de Pasos -->
      <div class="flex justify-between items-center mb-8" *ngIf="!reservaConfirmada">
        <div class="step" [class.active]="pasoActual >= 1">Artista</div>
        <div class="flex-1 h-0.5 bg-brand-gold/30 mx-4"></div>
        <div class="step" [class.active]="pasoActual >= 2">Servicios</div>
        <div class="flex-1 h-0.5 bg-brand-gold/30 mx-4"></div>
        <div class="step" [class.active]="pasoActual >= 3">Fecha y Hora</div>
        <div class="flex-1 h-0.5 bg-brand-gold/30 mx-4"></div>
        <div class="step" [class.active]="pasoActual >= 4">Confirmación</div>
      </div>

      <!-- Vista de Éxito -->
      <div *ngIf="reservaConfirmada" class="text-center py-12">
        <h2 class="text-3xl font-bold text-brand-gold mb-4">¡Reserva Confirmada!</h2>
        <p class="text-brand-light/90 mb-6">Hemos guardado tu turno. Tu código de reserva es:</p>
        <p class="text-4xl font-mono bg-brand-charcoal text-white py-4 px-6 rounded-lg inline-block">{{ tokenReserva }}</p>
        <button (click)="reiniciarProceso()" class="btn-primary mt-8">Hacer otra reserva</button>
      </div>

      <!-- Contenido del Paso Actual -->
      <div [ngSwitch]="pasoActual" *ngIf="!reservaConfirmada">

        <!-- Paso 1: Tatuador -->
        <div *ngSwitchCase="1">
          <app-paso1-tatuador [tatuadores]="tatuadores" (tatuadorSeleccionado)="onTatuadorSeleccionado($event)"></app-paso1-tatuador>
        </div>

        <!-- Paso 2: Servicios -->
        <app-paso2-servicios *ngSwitchCase="2"
          [tatuadorSeleccionado]="reservaState.tatuador"
          [servicios]="servicios"
          [(serviciosElegidos)]="reservaState.servicios"
          (serviciosElegidosChange)="onServiciosSeleccionados($event)"
          (navegacion)="cambiarPaso($event)">
        </app-paso2-servicios>

        <!-- Paso 3: Fecha y Hora -->
        <app-paso3-fecha-hora *ngSwitchCase="3"
          [tatuadorSeleccionado]="reservaState.tatuador"
          [duracionTotal]="duracionTotal"
          [(fechaSeleccionada)]="reservaState.fecha"
          (horaSeleccionadaChange)="onHoraSeleccionada($event)"
          (navegacion)="cambiarPaso($event)">
        </app-paso3-fecha-hora>

        <!-- Paso 4: Confirmación -->
        <div *ngSwitchCase="4">
          <app-paso4-confirmacion 
            [reservaState]="reservaState"
            [duracionTotal]="duracionTotal"
            (confirmacionExitosa)="onReservaExitosa($event)"
            (navegacion)="cambiarPaso($event)">
          </app-paso4-confirmacion>
        </div>

      </div>
    </div>
  </div>
</div>
